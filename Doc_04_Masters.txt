# 4. PRISM: Masters Module & Data Governance
## Comprehensive Data Management Manual & Relational Integrity Guide

### 4.1 Masters: The Structural Foundation
The Masters module is the repository for all long-lived, foundational data within PRISM. This data—Clients, Staff, Projects, and Facilities—forms the lookup tables used by every other part of the system. High-quality master data is essential for accurate scheduling, professional financial reporting, and strict tax compliance. Without robust "Masters," the transactional integrity of the system would collapse.

### 4.2 Customer Master & Relationship Hierarchy
The `customers` table is the primary billing entity. In PRISM, a customer represents an organization (e.g., a Production House, Advertising Agency, or Film Studio).

#### 4.2.1 Organizational Data Attributes
- **Legal Identity**: Stores full legal names as they should appear on official invoices.
- **Tax Compliance**: Mandatory fields for GST numbers (crucial for Indian and international tax jurisdictions) and PAN details.
- **Billing Infrastructure**: Comprehensive address fields including city, state, and pincode to ensure mail delivery and tax locality.
- **Financial Status**: Includes flags for `isActive`. Inactivating a customer prevents new bookings but preserves their entire financial history for audit purposes.

#### 4.2.2 Contact Management (Customer Contacts)
A customer organization often has multiple stakeholders. PRISM uses a 1:N relationship with the `customer_contacts` table to manage these relationships.
- **Contextual Contacts**: Stores individual names, designations (e.g., Executive Producer, Director, Production Accountant), and direct phone numbers.
- **The Primary POC Strategy**: Each client can have one "Primary" contact. The system uses this person's details as the default recipient for chalans, booking confirmations, and project updates.
- **Validation**: Ensures that contact information (email/phone) follows a standardized format before saving.

### 4.3 Project Master & Production Lifecycle
Projects are the billable units within PRISM. Every project is strictly linked to a specific Customer, ensuring a clean organizational hierarchy.

#### 4.3.1 Project Categorization and Enums
Standardization of project types ensures meaningful business analytics.
- **Type Enums**: Movie, Serial, Web Series, Ad, Teaser, Trilogy. These enums are enforced at the database level to prevent "Dirty Data" entry.
- **Lifecycle Tracking Flags**:
    - `hasChalanCreated`: A system-managed flag that indicates if any billing has been initiated for this project.
    - `hasInvoiceCreated`: Indicates if the entire financial cycle is completed.

#### 4.3.2 Active vs. Archive Philosophy
When a project finishes, it is never deleted. Instead, it is marked as `isActive = false`. 
- **Effect**: This removes the project from the "New Booking" dropdowns, reducing UI clutter for schedulers.
- **Retention**: Ensures that historical reports, utilization metrics, and audit logs remain accurate and complete for years to come.

### 4.4 Resource Master: Rooms & Facilities
Rooms represent the physical or virtual production spaces within the studio.

#### 4.4.1 Room Attributes and Technical Specs
- **Room Types**: Sound, Music, VFX, Client Office, Editing, Dubbing, Mixing. These categories are used for specialization matching during the booking process.
- **Technical Capacity**: Stores metadata about seating or workstation limits.
- **Conflict Governance Logic**: The `ignoreConflict` boolean is a powerful administrative tool. It allows certain spaces (like shared production offices or multipurpose lounges) to be overbooked without triggering system warnings.

#### 4.4.2 Facility Operational Status
Rooms can be toggled as "Inactive" for maintenance or decommissioning. This prevents new bookings while maintaining the integrity of historical room utilization reports.

### 4.5 Human Resource Master: Editors & Specialists
The `editors` table manages the studio's most valuable asset: its technical and creative talent.

#### 4.5.1 Specialist Classification and Skill-Matching
Editors are categorized by their technical domain (Video, Audio, VFX, Colorist, DI). 
- **Scheduler Intelligence**: This classification ensures that schedulers can easily filter for the right talent for a specific room type (e.g., filtering for "Colorists" when booking a DI Suite).

#### 4.5.2 Conflict Defaulting for Supervisors
Similar to rooms, editors can have an `ignoreConflict` flag. This is used for senior staff, supervisors, or creative directors who might need to oversee multiple rooms or sessions simultaneously.

#### 4.5.3 HR Tenure Tracking
PRISM tracks `joinDate` and `leaveDate`. 
- **Intelligence Integration**: This data is integrated with the reporting module to calculate tenure-based utilization and staff turnover metrics, helping management understand workforce stability.

### 4.6 Data Integrity Rules (Master Controls)
To maintain an enterprise-grade database, PRISM enforces several "Hard Rules":
- **Unique Constraints**: Names and identifiers (like GST numbers) are strictly unique to prevent duplicate billing entities.
- **Relational Locking**: Master records cannot be deleted if they are referenced by active operational data (Bookings, Chalans). The system will return a detailed error message explaining why the deletion is blocked.
- **Sanitization**: All Master entries are trimmed and sanitized to prevent whitespace errors in search and reporting.

---
*End of Document 4 - Masters Module*
