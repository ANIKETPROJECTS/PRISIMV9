‚úÖ Professional Replit Prompt ‚Äì User Management, RBAC, Chalan Logic & UI Fixes
üîπ Project Context

I have an existing production project with:

User Management

Role-based permissions (Admin, Custom users)

Reports (Conflict, Booking, Editor, Chalan)

Chalan Entry, Chalan Revision, Invoice

Booking with time-based billing

MySQL database

Live deployed structure

‚ö†Ô∏è Do NOT change:

Database schema unnecessarily

Existing workflow

API routes

UI structure or layout

Folder structure

Only fix logic, permissions, UI behavior, and bugs.

1Ô∏è‚É£ Admin-Only: Add Company in User Management
Requirement

Only Admin can:

See ‚ÄúAdd Company‚Äù button

Create a new company

Rules

Hide ‚ÄúAdd Company‚Äù button for all non-admin users

Backend must also block non-admin requests (403 Forbidden)

Admin flow:

Click Add Company

Open modal/form

Fields:

Company Name

Admin Username

Security PIN

Create company successfully

2Ô∏è‚É£ Remove Password Field ‚Äì Use Security PIN Only
Requirement

Remove Password field completely from:

Add User form

Edit User form

View User (eye icon)

Rules

Authentication uses Security PIN only

UI must NOT show password anywhere

Backend must NOT expect password for user create/update

Login must continue working with PIN (already implemented)

3Ô∏è‚É£ STRICT Report Permissions (Critical Fix)
Current Bug

If a user has permission for only Conflict Report (View):

They still see:

Booking Report

Editor Report

Chalan Report

With full permissions ‚ùå

Expected Behavior

Only show report sections explicitly permitted

Permissions apply per report:

View

Create

Edit

Delete

Example

If user has:

Conflict Report ‚Üí View only

Then:

Sidebar shows ONLY Conflict Report

Only View access enabled

No other reports visible

Apply same strict logic to:

Booking Report

Editor Report

Chalan Report

Frontend + Backend enforcement required.

4Ô∏è‚É£ Utility Section ‚Äì Admin Only

Utility menu:

Visible ONLY to Admin

Non-admin:

Menu hidden

Route access blocked (403)

5Ô∏è‚É£ Fix Chalan Revision Logic (Correct Business Meaning)
Definition

‚ÄúChalan Revised‚Äù means:

Editing / correcting an already created chalan

Not deleting or replacing it blindly

Required Behavior

On revise:

Copy original chalan data

Allow modification of:

Editor

Room

Time

Amount

Date

Mark original chalan as:

Revised

Create a new revised chalan entry

Keep audit trail intact

6Ô∏è‚É£ Chalan Price Calculation Based on Actual Time
Requirement

Calculate price using:

Actual From Time ‚Üí To Time

NOT estimated or fixed hours

Logic
Actual Duration = To Time ‚Äì From Time
Price = Actual Duration √ó Rate


Store actual time

Display actual time everywhere

7Ô∏è‚É£ Show Actual Time Everywhere Booking Appears

In all modules where booking time is shown:

Booking Calendar

Booking List

Reports

Chalan

Invoice

Display:

Scheduled Time (if exists)

Actual Time (From ‚Üí To) clearly with proper UI labels

8Ô∏è‚É£ Remove Print Button from Editor Report

Remove Print button/functionality completely from:

Editor Report UI

Do not affect other reports

9Ô∏è‚É£ Handle Large Amount UI Properly
Requirement

Large amounts must:

Fit inside column

Not overflow or break layout

UI Behavior

Truncate visually if needed

On hover:

Show full amount tooltip

Do NOT expand row or break table

üîü Chalan Report & Invoice ‚Äì Display Actual Time

In Chalan:

Report

Invoice

Print view

Display:

Actual From Time

Actual To Time

Consistent formatting across UI & PDF/print

1Ô∏è‚É£1Ô∏è‚É£ Project Cleanup & Deployment Readiness
Required Cleanup

Delete:

Unused asset images

Saved prompt files (development artifacts)

Keep:

Existing APIs

Existing logic

Existing structure

Final Code Must Be:

Clean

Production-ready

Server-deployable

No broken references

No workflow changes

üß† Security & Enforcement Rules

Backend permission validation on every API

Frontend hides UI elements but backend is final authority

Admin is the only super-user

Non-admin access strictly limited

üß™ Acceptance Criteria (Must Pass)

Non-admin cannot see Utility section

Reports show ONLY allowed report types

Chalan revision creates proper revised entry

Actual time used everywhere

Large amounts display cleanly

No password fields anywhere

Code runs without errors

Existing functionality unaffected

üéØ Final Outcome

Enterprise-grade RBAC

Correct chalan business logic

Accurate billing

Clean UI

Secure user management

Production-ready code